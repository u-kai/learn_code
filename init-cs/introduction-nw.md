---
marp: true
---


# Webにおけるネットワークについて

--- 
## ネットワークの流れ(スタート)
1. ユーザーがブラウザにURLを入力してスタート
    - URLを解読するところからブラウザの動作が始まる
    - ブラウザはURLを解読したり，HTTPメッセージを作る機能を持っている
    - ネットワークへメッセージを送り出す機能はOSにあるので，ブラウザはOSに送信をお願いする

---
## DNSに問い合わせ

サーバにリクエストをする場合，ブラウザはOSにリクエストを依頼
IPアドレスがわからない場合はWebブラウザがDNSサーバに問い合わせてIPアドレスを調べる

---
## 名前解決について

名前解決(Name Resolution):DNSの仕組みを使ってIPアドレスを調べること
DNSリゾルバ:名前解決をPC側で行なってくれるもの.実体はSocketライブラリ

リゾルバの呼び出し方法:ブラウザがSocketライブラリのgethostbynameをwebサーバの名前を引数に名前解決ができる

```python
import socket
ip = socket.gethostbyname("www.google.com")
print(ip)
# '142.251.42.196'
```

DNSサーバのIPは元々PCに設定されているので，DNSサーバ自体の名前解決不要

---
## IPを調べた後

OS内部のプロトコルスタックにメッセージの送信を依頼
ここでもSocketライブラリを使用する
リクエスト元(PC)とレスポンス元(サーバ)のソケットを繋げることでデータを送受信できる

---
## ソケットについて
データの送受信口のこと
サーバ側ではソケットがすでに構築され，PCからのデータを待っている状態(listen状態)
PCはソケットを作成しサーバのソケットにつなげにいく
両方のソケットがつながったら準備完了
ソケットにデータを放り込むことでデータの送受信が可能

---
## データ送受信動作
1. ソケットを作成
    - サーバは常に作成されており，listen状態
1. サーバ側のソケットに繋ぐ
1. データを送受信する
1. パイプを外してソケットを抹消する

---

## Socketライブラリ
OSに組み込まれているネットワーク機能ライブラリ

---


# サブネット
小さなネットワーク

---
# ネットワーク
サブネットの集まり
世界中のサブネットをルータで繋げたもの

---